apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: kube-request-access-webhook
webhooks:
- name: kube-request-access.default.svc
  rules:
  - apiGroups:   [""]
    apiVersions: ["v1"]
    resources:   ["pods/exec"]
    operations: ["*"]
    scope:       "Namespaced"
  - apiGroups: ["spreadgroup.com"]
    apiVersions: ["v1"]
    resources: ["accessrequests", "accessgrants"]
    operations: ["CREATE"]
    scope: Namespaced
  clientConfig:
    service:
      namespace: default
      name: kube-request-access
    # caBundle is set by `make local-config`, DO NOT change it manually.  (this contains the base64 encoded localhost cert)
    caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURtakNDQW9LZ0F3SUJBZ0lVSWp3Q2hRbEFiNm1xTWRMNGtCUmlDakU2a3pRd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0tqRW9NQ1lHQTFVRUF3d2ZhM1ZpWlMxeVpYRjFaWE4wTFdGalkyVnpjeTVrWldaaGRXeDBMbk4yWXpBZQpGdzB5TXpBek1UY3hORFF6TXpCYUZ3MHlOREF6TVRZeE5EUXpNekJhTUNveEtEQW1CZ05WQkFNTUgydDFZbVV0CmNtVnhkV1Z6ZEMxaFkyTmxjM011WkdWbVlYVnNkQzV6ZG1Nd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUIKRHdBd2dnRUtBb0lCQVFDM3JGbTMyaFNYdVdxNUZDSkpPZkg5eFRNWHdEY1I0YWYzT3dnWEYxWllLM0h2L0RWeQpZWnBQc3l6b0VabmJnajBlY1hyYXNwbmtRdTBLdVNibGNmNDZPdVVMUHRycGJMZk8xdTdOdCtFK0JlRDRmMFZMCmVCbEMvQTNFSWFoa0lUZVpFKytZbkRmMUh1aTZQOUV1OVJIQkdhYWt6emxKMjNTZFlVTng2TkxqMTA2R0ZQUHMKNHZKUStXdVhnVm5NU1E4eXNCT0gzcVMzZVdWK1Zxb0hGV2lweXYwL3F4eUdFcjhRanViNkNxdDFqenh5Q0VFTApGOS9LdUR2a0ZLRU4zdy80MGtHejBRaDIzMVpGZkxuem5XQ1U3eHBWYmJPWHNhS09MWVBuZDFrUWc5VVI4MXdwCk5xRDFPTCs2RTlHcENpUXpxNWlkdGN1OTMyWUV3RWkwV1RyM0FnTUJBQUdqZ2Jjd2diUXdjUVlEVlIwUkJHb3cKYUlJZmEzVmlaUzF5WlhGMVpYTjBMV0ZqWTJWemN5NWtaV1poZFd4MExuTjJZNEliZDJWaWFHOXZheTFoZFdScApkR1Z5TG1SbFptRjFiSFF1YzNaamdoMTNaV0pvYjI5ckxYWmhiR2xrWVhSdmNpNWtaV1poZFd4MExuTjJZNElKCmJHOWpZV3hvYjNOME1Bc0dBMVVkRHdRRUF3SUhnREFUQmdOVkhTVUVEREFLQmdnckJnRUZCUWNEQVRBZEJnTlYKSFE0RUZnUVVGd25MdU1lbU9yWmpmNmtNYkF0cUVXdE95UlV3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUF1TQpsUkNnM0RvUFpvODJsWGpwczFyUEl2Wkkwa01rUHBiMG9mYjdGY3hTYXYyRitMdy9yeTJRVDI2NGwvV2pCQ1k0CnhXd2dGeTloS3FLcWdZUXorZkRIOGJKOHR4S0FGZkovNXpkY1pveVZXS0pzSnNNTXUzK254a0ViOGtBZkFWMlYKcDQxcDRqMjFFUjB2anRhV2E3TVNwNW5lM2ZoMW1sN0Zsejg5di9sRGd0bjJ2MXVZc3Z1MG1aVlpZMmVHQllBMQpFRysyOFgybVpsb2ltRGM3cUU3WHdITGhPWjRuVGxLNDArY3pYZUx5WXdjMEYzdnFWZzRzUlc0aHdmSUdXYzFiClVDV245bTllaG5zSUJHc1ZPb2RqdlZRWkhacDVpOFJIM3VyTVlkZmlFT0ZveDlUZFQ4QnJGQ1BHNlVtUzU0UisKWXhqeVc1VnI0OEVJYUYrQTN4ST0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo="  # CA_BUNDLE
  admissionReviewVersions: ["v1"]
  sideEffects: NoneOnDryRun
  timeoutSeconds: 5
