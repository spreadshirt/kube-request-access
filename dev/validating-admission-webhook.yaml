apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: kubectl-audit-webhook
webhooks:
- name: kubectl-audit.default.svc
  rules:
  - apiGroups:   [""]
    apiVersions: ["v1"]
    resources:   ["pods/exec"]
    operations: ["*"]
    scope:       "Namespaced"
  - apiGroups: ["spreadgroup.com"]
    apiVersions: ["v1"]
    resources: ["accessrequests"]
    operations: ["CREATE"]
    scope: Namespaced
  clientConfig:
    service:
      namespace: default
      name: kubectl-audit
    # caBundle is set by `make local-config`, DO NOT change it manually.  (this contains the base64 encoded localhost cert)
    caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURLekNDQWhPZ0F3SUJBZ0lVTFNPT1BOUFRLWGlrRDA1Zmdvc3czNjhWV2k0d0RRWUpLb1pJaHZjTkFRRUwKQlFBd0pERWlNQ0FHQTFVRUF3d1phM1ZpWldOMGJDMWhkV1JwZEM1a1pXWmhkV3gwTG5OMll6QWVGdzB5TWpFdwpNamN4TXpNeE16RmFGdzB5TWpFeE1qWXhNek14TXpGYU1DUXhJakFnQmdOVkJBTU1HV3QxWW1WamRHd3RZWFZrCmFYUXVaR1ZtWVhWc2RDNXpkbU13Z2dFaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQkR3QXdnZ0VLQW9JQkFRREkKVno4YjdNVUdQOHZwY01jZjM3V0paRHQ2bHovNEQzYWpORGc1R0pId3JBWGJGTDYxNzZnU00rZDhDc3dWRzdhdApmMUFlRWpPRmRIcEtiYlNtMlVvbGRoejBWZHNSVDNRTE5ONzlYbmM5cXk5VzhRR1BHSi9PK2lmNGR5OUNaZFNjClFMdVFJckp1L0FJN3RxdHFkK1piU085elY4dGF2M2pNM0xZenBQRzQrYTFWTTZ2U3FnQk1iQllvd3ZnR251bE4KdmhoK3NOMWMxaXphbXVsSmthVlQzazdzQzVYZVJyV0pRV0o0SVNEZ3Awd3UxSDlnajZ2SmQwWVdvZkZuSDU0YwpoQ0srbkVIZ0lvcnZTNjR1NlAxUnY1aXFPdGxheDRGTUFkN2x6VmIzZk8rOWpCYTk0RDRYV0hYWkNKeHBUa25OCnJkRityS01LK2I1QkJRM2FRZkZSQWdNQkFBR2pWVEJUTUM4R0ExVWRFUVFvTUNhQ0dXdDFZbVZqZEd3dFlYVmsKYVhRdVpHVm1ZWFZzZEM1emRtT0NDV3h2WTJGc2FHOXpkREFMQmdOVkhROEVCQU1DQjRBd0V3WURWUjBsQkF3dwpDZ1lJS3dZQkJRVUhBd0V3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUF2U3pXSHcrT1hpRThSYlU1eUxuMlk3CmppYTd1K2I4QTBiOVBFaVZJQkVBQzY0eFI0bXl1anFnOTNta2drSTlDTXdaNHJUY0xzaGwwVGJtSk5HcFBMd0wKTWdUYjBJQS9iSGl4THRVWm9xRVN4amlvOXgxTWV1OWhvYXhYRlVLNStxZ2Rka1N1Q09sMEpyRlJVelg5YXZ4SAplRGhrWlgxeVd4R0R2Zy9MYWYvTlVHNWdFY1cyT2hIQW5ybVpSR1VTQkFvU1ZNaTJrbHcrWnVYa09nM2hrTzYyCktrK1FWTGRqcDkwSTJGZk5KSTUxTVhDVm95N2h1VW9IdC9Nc0diNHEyL1ZKdHAvc3dxdnJGT0lGUU8rT0Q0MlAKRVE4QU1LVXhRbUlmTGY1SzVpNmE3elNuVUlGWloydmh2VTB3U3hoaTMyM0pXbFN2NXlmMXMyMUFqTnlsT280PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="  # CA_BUNDLE
  admissionReviewVersions: ["v1"]
  sideEffects: NoneOnDryRun
  timeoutSeconds: 5
